## 中文

v0.3.0 - sherpa-onnx 轻量级引擎迁移

### 核心升级

**完全替换 Faster Whisper 为 sherpa-onnx**
- 安装体积减少 90%：2-3GB → <250MB
- CPU 性能提升 30-300 倍：RTF 10-20 → 0.06-0.21
- 完全移除 GPU 依赖：无需 CUDA Toolkit

**双模式流式转录**
- Chunked 模式：30秒分块，支持 AI 优化，适合会议/文档
- Realtime 模式：边录边转，减少 70-90% 延迟，适合字幕/快速笔记

**企业级资源管理**
- 6 阶段清理流程：修复 PyAudio 泄漏，线程安全退出
- 应用退出速度提升 3-5 倍，无资源泄漏

**新增 Qwen ASR 云服务**
- 极速转录 <500ms，支持中英文混合识别
- 长音频支持最长 3 小时

### 主要功能

**轻量级本地模型**
- 中文模型（Paraformer）：226MB，高准确率
- 英文模型（Zipformer）：112MB，高准确率
- 首次使用自动从 GitHub 下载

**智能输入系统**
- 统一输入管理：支持多种输入方式
- 增量式文本替换，更流畅

**转录提供商**
- 本地：sherpa-onnx（无需网络）
- 云端：Groq / SiliconFlow / Qwen ASR
- AI 文本优化：支持多个主流平台

### 技术改进

**代码精简**
- 代码减少 1,650 行（-46%）
- 移除复杂的 GPU 管理和 Whisper 引擎代码
- 新增轻量级 sherpa-onnx 引擎和模型管理

**依赖优化**
- 移除 faster-whisper 等大型依赖（2.6GB）
- 替换为 sherpa-onnx（165MB）

**性能提升**
- CPU 性能提升 30-300 倍
- 内存占用降低 65-73%

### 版本对比

| 特性 | v0.2.0 | v0.3.0 |
|------|--------|--------|
| 转录引擎 | Faster Whisper | sherpa-onnx |
| 安装体积 | 2-3GB | <250MB |
| GPU 依赖 | CUDA 必需 | 无需 GPU |
| CPU 性能 | 慢 | 快 30-300 倍 |
| 流式转录 | 不支持 | 双模式支持 |
| Qwen ASR | 不支持 | 支持 |
| 资源管理 | 基础 | 企业级重构 |

### 破坏性变更

**配置自动迁移**
- 启动时自动检测并转换旧版配置
- 自动移除 GPU 相关设置（gpu_acceleration、compute_type、gpu_device）
- 自动添加新字段（streaming_mode、language）
- 无需手动修改配置文件

**系统要求变更**
- 不再需要：NVIDIA GPU / CUDA Toolkit / cuDNN / 8GB+ VRAM
- 新要求：Windows 10/11 64-bit / 4GB RAM / 500MB 磁盘空间

**新增配置选项**
- 流式模式选择：chunked（分块） 或 realtime（实时）
- Qwen ASR 云服务：需配置 API 密钥

### 升级步骤

**所有用户推荐升级**
1. 体积减少 90%，释放 2GB+ 磁盘空间
2. 性能提升 30-300 倍，任何电脑流畅运行
3. 双模式流式转录，延迟更低

**升级方式**
1. 下载 SonicInput-v0.3.0-win64.exe
2. 关闭旧版本，替换可执行文件
3. 启动应用（自动迁移配置和下载模型）

**注意事项**
- 首次启动自动下载模型（226MB，约 2 分钟）
- 下载失败可手动放置到 `%AppData%\SonicInput\models/`

### 系统要求

**最低配置**
- Windows 10 64-bit
- Intel Core i3 或同等 CPU
- 4GB RAM
- 500MB 磁盘空间

**推荐配置**
- Windows 11 64-bit
- Intel Core i5 或 AMD Ryzen 5
- 8GB RAM
- 1GB 磁盘空间

### 技术支持

**配置和日志**
- 配置：`%AppData%\SonicInput\config.json`
- 日志：`%AppData%\SonicInput\logs\app.log`
- 模型：`%AppData%\SonicInput\models/`

**文档**
- [项目 README](README.md)
- [CLAUDE.md](CLAUDE.md) - 开发者文档

**问题反馈**
- GitHub Issues: [提交 Issue](https://github.com/Oxidane-bot/SonicInput/issues)

---

## English

v0.3.0 - sherpa-onnx Lightweight Engine Migration

### Core Upgrades

**Complete Replacement of Faster Whisper with sherpa-onnx**
- 90% reduction in installation size: 2-3GB → <250MB
- 30-300x CPU performance boost: RTF 10-20 → 0.06-0.21
- Complete GPU dependency removal: No CUDA Toolkit needed

**Dual-Mode Streaming Transcription**
- Chunked mode: 30-second chunks, AI optimization support, ideal for meetings/documents
- Realtime mode: Record-and-transcribe, 70-90% latency reduction, ideal for subtitles/quick notes

**Enterprise-Grade Resource Management**
- 6-phase cleanup process: Fixed PyAudio leaks, thread-safe exit
- 3-5x faster app exit, no resource leaks

**New Qwen ASR Cloud Service**
- Ultra-fast transcription <500ms, Chinese-English mixed recognition
- Long audio support up to 3 hours

### Key Features

**Lightweight Local Models**
- Chinese model (Paraformer): 226MB, high accuracy
- English model (Zipformer): 112MB, high accuracy
- Automatic download from GitHub on first use

**Smart Input System**
- Unified input management: Multiple input methods
- Incremental text replacement, smoother experience

**Transcription Providers**
- Local: sherpa-onnx (offline)
- Cloud: Groq / SiliconFlow / Qwen ASR
- AI text optimization: Multiple mainstream platforms

### Technical Improvements

**Code Simplification**
- 1,650 lines reduced (-46%)
- Removed complex GPU management and Whisper engine
- Added lightweight sherpa-onnx engine and model management

**Dependency Optimization**
- Removed faster-whisper and large dependencies (2.6GB)
- Replaced with sherpa-onnx (165MB)

**Performance Boost**
- 30-300x CPU performance improvement
- 65-73% memory usage reduction

### Version Comparison

| Feature | v0.2.0 | v0.3.0 |
|---------|--------|--------|
| Engine | Faster Whisper | sherpa-onnx |
| Install Size | 2-3GB | <250MB |
| GPU Dependency | CUDA required | No GPU needed |
| CPU Performance | Slow | 30-300x faster |
| Streaming | Not supported | Dual-mode support |
| Qwen ASR | Not supported | Supported |
| Resource Management | Basic | Enterprise-grade |

### Breaking Changes

**Automatic Config Migration**
- Auto-detects and converts old configs on startup
- Automatically removes GPU settings (gpu_acceleration, compute_type, gpu_device)
- Automatically adds new fields (streaming_mode, language)
- No manual config editing required

**System Requirements Changes**
- No longer needed: NVIDIA GPU / CUDA Toolkit / cuDNN / 8GB+ VRAM
- New requirements: Windows 10/11 64-bit / 4GB RAM / 500MB disk space

**New Configuration Options**
- Streaming mode: chunked (chunks) or realtime (real-time)
- Qwen ASR cloud service: API key required

### Upgrade Steps

**Recommended for All Users**
1. 90% size reduction, free up 2GB+ disk space
2. 30-300x performance boost, runs smoothly on any computer
3. Dual-mode streaming, lower latency

**Upgrade Process**
1. Download SonicInput-v0.3.0-win64.exe
2. Close old version, replace executable
3. Launch app (auto-migrates config and downloads models)

**Notes**
- First launch auto-downloads models (226MB, ~2 minutes)
- Manual download option if fails: place in `%AppData%\SonicInput\models/`

### System Requirements

**Minimum**
- Windows 10 64-bit
- Intel Core i3 or equivalent CPU
- 4GB RAM
- 500MB disk space

**Recommended**
- Windows 11 64-bit
- Intel Core i5 or AMD Ryzen 5
- 8GB RAM
- 1GB disk space

### Technical Support

**Configuration and Logs**
- Config: `%AppData%\SonicInput\config.json`
- Logs: `%AppData%\SonicInput\logs\app.log`
- Models: `%AppData%\SonicInput\models/`

**Documentation**
- [Project README](README.md)
- [CLAUDE.md](CLAUDE.md) - Developer documentation

**Issue Reporting**
- GitHub Issues: [Submit Issue](https://github.com/Oxidane-bot/SonicInput/issues)

---

Core Improvement Summary: v0.3.0 achieves major breakthroughs through complete sherpa-onnx engine replacement: 90% installation size reduction, 30-300x CPU performance boost, complete GPU dependency removal, while adding dual-mode streaming transcription and Qwen ASR support.
