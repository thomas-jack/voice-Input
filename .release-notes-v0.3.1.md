## 中文

v0.3.1 - 轻量级本地转录 + 实时语音输入

### 主要特性

**本地转录引擎升级**
- 替换为 sherpa-onnx 轻量级引擎
- 安装体积从 2-3GB 降至 250MB
- CPU 推理速度显著提升
- 完全移除 GPU 依赖

**实时语音输入 (新增)**
- Realtime 模式：边录边转，实时输入文字
- Chunked 模式：支持 AI 文本优化
- 适用场景：会议记录、快速笔记、字幕输入

**剪贴板智能恢复 (新增)**
- 录音前自动备份剪贴板内容
- 录音完成后自动恢复原内容
- 支持多种剪贴板格式

**Qwen ASR 云服务**
- 高速转录，支持中英文混合
- 长音频支持

**稳定性改进**
- 修复悬浮窗显示问题
- 修复音频可视化器延迟
- 改进状态管理

### 主要功能

**轻量级本地模型**
- 中文模型（Paraformer）：226MB，高准确率
- 英文模型（Zipformer）：112MB，高准确率
- 首次使用自动从 GitHub 下载

**智能输入系统**
- 统一输入管理：支持多种输入方式
- 增量式文本替换，更流畅

**转录提供商**
- 本地：sherpa-onnx（无需网络）
- 云端：Groq / SiliconFlow / Qwen ASR
- AI 文本优化：支持多个主流平台

### 技术改进

**代码精简**
- 移除 GPU 管理相关代码
- 替换为轻量级 sherpa-onnx 引擎

**依赖优化**
- 移除 faster-whisper 大型依赖
- 使用 sherpa-onnx 轻量级库

### 版本对比

| 特性 | v0.2.0 | v0.3.1 |
|------|--------|--------|
| 转录引擎 | Faster Whisper | sherpa-onnx |
| 安装体积 | 2-3GB | <250MB |
| GPU 依赖 | 需要 CUDA | 纯 CPU |
| 实时输入 | 不支持 | 支持 |
| 剪贴板恢复 | 不支持 | 自动恢复 |
| Qwen ASR | 不支持 | 支持 |

### 破坏性变更

**配置自动迁移**
- 启动时自动检测并转换旧版配置
- 自动移除 GPU 相关设置（gpu_acceleration、compute_type、gpu_device）
- 自动添加新字段（streaming_mode、language）
- 无需手动修改配置文件

**系统要求变更**
- 不再需要：NVIDIA GPU / CUDA Toolkit / cuDNN / 8GB+ VRAM
- 新要求：Windows 10/11 64-bit / 4GB RAM / 500MB 磁盘空间

**新增配置选项**
- 流式模式选择：chunked（分块） 或 realtime（实时）
- Qwen ASR 云服务：需配置 API 密钥

### 升级步骤

**所有用户推荐升级**
1. 体积减少 90%，释放 2GB+ 磁盘空间
2. 性能提升 30-300 倍，任何电脑流畅运行
3. 双模式流式转录，延迟更低

**升级方式**
1. 下载 SonicInput-v0.3.1-win64.exe
2. 关闭旧版本，替换可执行文件
3. 启动应用（自动迁移配置和下载模型）

**注意事项**
- 首次启动自动下载模型（226MB，约 2 分钟）
- 下载失败可手动放置到 `%AppData%\SonicInput\models/`

### 系统要求

**最低配置**
- Windows 10 64-bit
- Intel Core i3 或同等 CPU
- 4GB RAM
- 500MB 磁盘空间

**推荐配置**
- Windows 11 64-bit
- Intel Core i5 或 AMD Ryzen 5
- 8GB RAM
- 1GB 磁盘空间

### 技术支持

**配置和日志**
- 配置：`%AppData%\SonicInput\config.json`
- 日志：`%AppData%\SonicInput\logs\app.log`
- 模型：`%AppData%\SonicInput\models/`

**文档**
- [项目 README](README.md)

**问题反馈**
- GitHub Issues: [提交 Issue](https://github.com/Oxidane-bot/SonicInput/issues)

---

## English

v0.3.1 - Lightweight Local ASR + Real-time Voice Input

### Key Features

**Local Transcription Engine Upgrade**
- Replaced with sherpa-onnx lightweight engine
- Installation size reduced from 2-3GB to 250MB
- Significantly improved CPU inference speed
- Complete GPU dependency removal

**Real-time Voice Input (New)**
- Realtime mode: Real-time text input while recording
- Chunked mode: AI text optimization support
- Use cases: Meeting notes, quick notes, subtitles

**Smart Clipboard Recovery (New)**
- Auto-backup clipboard before recording
- Auto-restore after recording complete
- Multiple clipboard format support

**Qwen ASR Cloud Service**
- Fast transcription with Chinese-English support
- Long audio support

**Stability Improvements**
- Fixed overlay display issues
- Fixed audio visualizer delay
- Improved state management

### Key Features

**Lightweight Local Models**
- Chinese model (Paraformer): 226MB, high accuracy
- English model (Zipformer): 112MB, high accuracy
- Automatic download from GitHub on first use

**Smart Input System**
- Unified input management: Multiple input methods
- Incremental text replacement, smoother experience

**Transcription Providers**
- Local: sherpa-onnx (offline)
- Cloud: Groq / SiliconFlow / Qwen ASR
- AI text optimization: Multiple mainstream platforms

### Technical Improvements

**Code Simplification**
- Removed GPU management code
- Replaced with lightweight sherpa-onnx engine

**Dependency Optimization**
- Removed faster-whisper large dependencies
- Using sherpa-onnx lightweight library

### Version Comparison

| Feature | v0.2.0 | v0.3.1 |
|---------|--------|--------|
| Engine | Faster Whisper | sherpa-onnx |
| Install Size | 2-3GB | <250MB |
| GPU Dependency | CUDA required | CPU only |
| Real-time Input | Not supported | Supported |
| Clipboard Recovery | Not supported | Auto-restore |
| Qwen ASR | Not supported | Supported |

### Breaking Changes

**Automatic Config Migration**
- Auto-detects and converts old configs on startup
- Automatically removes GPU settings (gpu_acceleration, compute_type, gpu_device)
- Automatically adds new fields (streaming_mode, language)
- No manual config editing required

**System Requirements Changes**
- No longer needed: NVIDIA GPU / CUDA Toolkit / cuDNN / 8GB+ VRAM
- New requirements: Windows 10/11 64-bit / 4GB RAM / 500MB disk space

**New Configuration Options**
- Streaming mode: chunked (chunks) or realtime (real-time)
- Qwen ASR cloud service: API key required

### Upgrade Steps

**Recommended for All Users**
1. 90% size reduction, free up 2GB+ disk space
2. 30-300x performance boost, runs smoothly on any computer
3. Dual-mode streaming, lower latency

**Upgrade Process**
1. Download SonicInput-v0.3.1-win64.exe
2. Close old version, replace executable
3. Launch app (auto-migrates config and downloads models)

**Notes**
- First launch auto-downloads models (226MB, ~2 minutes)
- Manual download option if fails: place in `%AppData%\SonicInput\models/`

### System Requirements

**Minimum**
- Windows 10 64-bit
- Intel Core i3 or equivalent CPU
- 4GB RAM
- 500MB disk space

**Recommended**
- Windows 11 64-bit
- Intel Core i5 or AMD Ryzen 5
- 8GB RAM
- 1GB disk space

### Technical Support

**Configuration and Logs**
- Config: `%AppData%\SonicInput\config.json`
- Logs: `%AppData%\SonicInput\logs\app.log`
- Models: `%AppData%\SonicInput\models/`

**Documentation**
- [Project README](README.md)

**Issue Reporting**
- GitHub Issues: [Submit Issue](https://github.com/Oxidane-bot/SonicInput/issues)

---

**核心改进总结**: v0.3.1 通过 sherpa-onnx 引擎替换实现轻量化(安装包从 2-3GB 降至 250MB)、移除 GPU 依赖,同时新增实时语音输入和剪贴板智能恢复功能,提升日常使用体验。

**Core Improvements**: v0.3.1 achieves lightweight installation (reduced from 2-3GB to 250MB) through sherpa-onnx engine, removes GPU dependency, and adds real-time voice input and smart clipboard recovery for better daily use experience.
